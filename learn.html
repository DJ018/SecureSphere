<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Learn Cyber Security | SecureSphere</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Google Fonts -->
  <link
    href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;700&family=Inter:wght@400;500;600;700&display=swap"
    rel="stylesheet">

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: linear-gradient(135deg, #020617 0%, #0c1838 100%);
      color: #e5e7eb;
      font-family: 'Inter', sans-serif;
      min-height: 100vh;
    }

    /* Navbar */
    .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px 60px;
      background: rgba(2, 6, 23, 0.8);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(34, 211, 238, 0.2);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .logo {
      font-family: 'Orbitron', sans-serif;
      color: #22d3ee;
      font-size: 28px;
      font-weight: 600;
      text-shadow: 0 0 20px rgba(34, 211, 238, 0.5);
    }

    nav a {
      color: #94a3b8;
      margin-left: 30px;
      text-decoration: none;
      font-weight: 500;
      transition: all 0.3s ease;
      position: relative;
    }

    nav a:hover {
      color: #22d3ee;
    }

    nav a::after {
      content: '';
      position: absolute;
      bottom: -5px;
      left: 0;
      width: 0;
      height: 2px;
      background: #22d3ee;
      transition: width 0.3s ease;
    }

    nav a:hover::after {
      width: 100%;
    }

    /* Page Header */
    .page-header {
      padding: 80px 60px 40px;
      text-align: center;
    }

    .page-header h1 {
      font-size: 48px;
      font-weight: 700;
      background: linear-gradient(135deg, #22d3ee 0%, #3b82f6 100%);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 15px;
    }

    .page-header p {
      color: #94a3b8;
      font-size: 18px;
      max-width: 800px;
      margin: 0 auto;
      line-height: 1.6;
    }

    /* Progress Overview */
    .progress-overview {
      max-width: 1200px;
      margin: 40px auto;
      padding: 0 60px;
    }

    .progress-card {
      background: linear-gradient(135deg, rgba(15, 23, 42, 0.8) 0%, rgba(30, 41, 59, 0.6) 100%);
      padding: 30px;
      border-radius: 16px;
      border: 1px solid rgba(34, 211, 238, 0.3);
      display: flex;
      justify-content: space-around;
      align-items: center;
      gap: 40px;
    }

    .stat {
      text-align: center;
    }

    .stat-value {
      font-size: 36px;
      font-weight: 700;
      color: #22d3ee;
      display: block;
    }

    .stat-label {
      color: #94a3b8;
      font-size: 14px;
      margin-top: 5px;
    }

    /* Learning Grid */
    .learn-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 30px;
      padding: 40px 60px 80px;
      max-width: 1400px;
      margin: 0 auto;
    }

    .learn-card {
      background: linear-gradient(135deg, rgba(15, 23, 42, 0.8) 0%, rgba(30, 41, 59, 0.6) 100%);
      padding: 30px;
      border-radius: 16px;
      border: 1px solid rgba(34, 211, 238, 0.3);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      cursor: pointer;
    }

    .learn-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, rgba(34, 211, 238, 0.1) 0%, transparent 100%);
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .learn-card:hover {
      transform: translateY(-5px);
      border-color: rgba(34, 211, 238, 0.6);
      box-shadow: 0 10px 40px rgba(34, 211, 238, 0.2);
    }

    .learn-card:hover::before {
      opacity: 1;
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 15px;
    }

    .learn-icon {
      font-size: 40px;
      margin-bottom: 10px;
    }

    .learn-card h3 {
      font-size: 22px;
      color: #22d3ee;
      margin-bottom: 10px;
      font-weight: 600;
    }

    .module-meta {
      display: flex;
      gap: 15px;
      margin-bottom: 15px;
      flex-wrap: wrap;
    }

    .badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
    }

    .badge.level {
      background: rgba(34, 211, 238, 0.2);
      color: #22d3ee;
      border: 1px solid rgba(34, 211, 238, 0.3);
    }

    .badge.duration {
      background: rgba(148, 163, 184, 0.2);
      color: #94a3b8;
      border: 1px solid rgba(148, 163, 184, 0.3);
    }

    .badge.completed {
      background: rgba(34, 197, 94, 0.2);
      color: #22c55e;
      border: 1px solid rgba(34, 197, 94, 0.3);
    }

    .learn-card p {
      color: #94a3b8;
      line-height: 1.6;
      margin-bottom: 20px;
      font-size: 15px;
    }

    .start-btn {
      width: 100%;
      padding: 12px 24px;
      background: linear-gradient(135deg, #22d3ee 0%, #3b82f6 100%);
      border: none;
      border-radius: 8px;
      color: #020617;
      font-weight: 600;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .start-btn:hover {
      transform: scale(1.02);
      box-shadow: 0 5px 20px rgba(34, 211, 238, 0.4);
    }

    /* Learning Module Modal */
    .module-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(2, 6, 23, 0.95);
      backdrop-filter: blur(10px);
      z-index: 1000;
      overflow-y: auto;
      animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }

      to {
        opacity: 1;
      }
    }

    .module-modal.active {
      display: block;
    }

    .modal-content {
      max-width: 900px;
      margin: 40px auto;
      padding: 40px;
      background: linear-gradient(135deg, rgba(15, 23, 42, 0.95) 0%, rgba(30, 41, 59, 0.9) 100%);
      border-radius: 20px;
      border: 1px solid rgba(34, 211, 238, 0.3);
      position: relative;
    }

    .close-modal {
      position: absolute;
      top: 20px;
      right: 20px;
      background: rgba(239, 68, 68, 0.2);
      border: 1px solid rgba(239, 68, 68, 0.3);
      color: #ef4444;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      font-size: 24px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .close-modal:hover {
      background: rgba(239, 68, 68, 0.3);
      transform: rotate(90deg);
    }

    .modal-header {
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 1px solid rgba(34, 211, 238, 0.2);
    }

    .modal-header h2 {
      font-size: 32px;
      color: #22d3ee;
      margin-bottom: 10px;
    }

    .content-section {
      margin-bottom: 30px;
    }

    .content-section h4 {
      color: #22d3ee;
      font-size: 20px;
      margin-bottom: 15px;
    }

    .content-section p {
      color: #e5e7eb;
      line-height: 1.8;
      margin-bottom: 15px;
    }

    .content-section ul {
      list-style: none;
      padding-left: 0;
    }

    .content-section li {
      color: #94a3b8;
      padding: 10px 0;
      padding-left: 30px;
      position: relative;
      line-height: 1.6;
    }

    .content-section li::before {
      content: '‚úì';
      position: absolute;
      left: 0;
      color: #22d3ee;
      font-weight: bold;
    }

    /* Quiz Section */
    .quiz-section {
      background: rgba(2, 6, 23, 0.6);
      padding: 25px;
      border-radius: 12px;
      border: 1px solid rgba(34, 211, 238, 0.2);
      margin-top: 30px;
    }

    .quiz-section h4 {
      color: #22d3ee;
      margin-bottom: 20px;
    }

    .quiz-question {
      margin-bottom: 20px;
    }

    .quiz-question label {
      color: #e5e7eb;
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
    }

    .quiz-question input {
      width: 100%;
      padding: 12px 16px;
      background: rgba(2, 6, 23, 0.6);
      border: 1px solid rgba(34, 211, 238, 0.4);
      border-radius: 8px;
      color: #e5e7eb;
      font-size: 15px;
      font-family: 'Inter', sans-serif;
    }

    .quiz-question input:focus {
      outline: none;
      border-color: #22d3ee;
      box-shadow: 0 0 0 3px rgba(34, 211, 238, 0.1);
    }

    .quiz-result {
      margin-top: 20px;
      padding: 20px;
      border-radius: 8px;
      display: none;
      animation: slideIn 0.3s ease;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .quiz-result.show {
      display: block;
    }

    .quiz-result.passed {
      background: rgba(34, 197, 94, 0.1);
      border: 1px solid rgba(34, 197, 94, 0.3);
      color: #22c55e;
    }

    .quiz-result.failed {
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid rgba(239, 68, 68, 0.3);
      color: #ef4444;
    }

    .action-btn {
      padding: 12px 24px;
      background: linear-gradient(135deg, #22d3ee 0%, #3b82f6 100%);
      border: none;
      border-radius: 8px;
      color: #020617;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-right: 10px;
      margin-top: 10px;
    }

    .action-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(34, 211, 238, 0.3);
    }

    .action-btn.secondary {
      background: rgba(148, 163, 184, 0.2);
      color: #94a3b8;
      border: 1px solid rgba(148, 163, 184, 0.3);
    }

    /* Certificate Modal */
    .certificate-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(2, 6, 23, 0.95);
      backdrop-filter: blur(10px);
      z-index: 1001;
      animation: fadeIn 0.3s ease;
      overflow-y: auto;
      padding: 20px;
    }

    .certificate-modal.active {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .certificate-content {
      background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
      padding: 50px 60px;
      border-radius: 16px;
      border: 12px double #22d3ee;
      max-width: 850px;
      width: 100%;
      text-align: center;
      position: relative;
      box-shadow: 0 25px 80px rgba(34, 211, 238, 0.4), inset 0 0 60px rgba(34, 211, 238, 0.05);
    }

    /* Certificate Corner Ornaments */
    .certificate-content::before,
    .certificate-content::after {
      content: '';
      position: absolute;
      width: 80px;
      height: 80px;
      border: 3px solid #22d3ee;
    }

    .certificate-content::before {
      top: 20px;
      left: 20px;
      border-right: none;
      border-bottom: none;
    }

    .certificate-content::after {
      bottom: 20px;
      right: 20px;
      border-left: none;
      border-top: none;
    }

    .cert-logo {
      width: 100px;
      height: 100px;
      margin: 0 auto 20px;
      filter: drop-shadow(0 4px 12px rgba(34, 211, 238, 0.3));
    }

    .cert-header {
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 2px solid rgba(34, 211, 238, 0.2);
    }

    .cert-org-name {
      font-family: 'Orbitron', sans-serif;
      font-size: 32px;
      font-weight: 700;
      background: linear-gradient(135deg, #22d3ee 0%, #3b82f6 100%);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 10px;
    }

    .certificate-content h2 {
      color: #020617;
      font-size: 28px;
      margin-bottom: 30px;
      font-family: 'Orbitron', sans-serif;
      text-transform: uppercase;
      letter-spacing: 2px;
    }

    .cert-text {
      color: #475569;
      font-size: 18px;
      margin: 15px 0;
      line-height: 1.6;
    }

    .certificate-content .cert-name {
      color: #020617;
      font-size: 36px;
      font-weight: 700;
      margin: 25px 0;
      padding: 15px 30px;
      background: linear-gradient(135deg, rgba(34, 211, 238, 0.1) 0%, rgba(59, 130, 246, 0.1) 100%);
      border-radius: 8px;
      border: 2px solid rgba(34, 211, 238, 0.3);
    }

    .cert-module {
      color: #22d3ee;
      font-size: 24px;
      font-weight: 600;
      margin: 20px 0;
    }

    .cert-footer {
      margin-top: 40px;
      padding-top: 30px;
      border-top: 2px solid rgba(34, 211, 238, 0.2);
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 20px;
    }

    .cert-date,
    .cert-id {
      color: #64748b;
      font-size: 14px;
      font-weight: 500;
    }

    .cert-id {
      font-family: 'Courier New', monospace;
      background: rgba(34, 211, 238, 0.1);
      padding: 8px 16px;
      border-radius: 6px;
      border: 1px solid rgba(34, 211, 238, 0.2);
    }

    .cert-seal {
      position: absolute;
      bottom: 30px;
      right: 60px;
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background: linear-gradient(135deg, #22d3ee 0%, #3b82f6 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 24px;
      box-shadow: 0 4px 15px rgba(34, 211, 238, 0.4);
    }

    .cert-actions {
      margin-top: 30px;
      display: flex;
      gap: 15px;
      justify-content: center;
      flex-wrap: wrap;
    }

    /* Footer */
    footer {
      text-align: center;
      padding: 30px;
      background: rgba(18, 24, 41, 0.8);
      color: #94a3b8;
      font-size: 14px;
    }

    /* Loading State */
    .loading {
      text-align: center;
      padding: 40px;
      color: #22d3ee;
    }

    .spinner {
      border: 3px solid rgba(34, 211, 238, 0.3);
      border-top: 3px solid #22d3ee;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin: 20px auto;
    }

    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }
  </style>
</head>

<body>

  <!-- NAVBAR -->
  <header class="navbar">
    <div class="logo">SecureSphere</div>
    <nav>
      <a href="index.html">Home</a>
      <a href="learn.html">Learn</a>
      <a href="services.html">Services</a>
      <a href="portfolio.html">Portfolio</a>
      <a href="lab.html">Labs</a>
      <a href="game.html">Games</a>
    </nav>
  </header>

  <!-- PAGE HEADER -->
  <section class="page-header">
    <h1>üìö Learn Cyber Security</h1>
    <p>
      Master cybersecurity through structured, interactive learning modules.
      From basics to advanced concepts, build your skills with hands-on content and assessments.
    </p>
  </section>

  <!-- PROGRESS OVERVIEW -->
  <section class="progress-overview">
    <div class="progress-card">
      <div class="stat">
        <span class="stat-value" id="completedModules">0</span>
        <span class="stat-label">Modules Completed</span>
      </div>
      <div class="stat">
        <span class="stat-value" id="totalModules">6</span>
        <span class="stat-label">Total Modules</span>
      </div>
      <div class="stat">
        <span class="stat-value" id="progressPercent">0%</span>
        <span class="stat-label">Overall Progress</span>
      </div>
    </div>
  </section>

  <!-- LEARNING CONTENT -->
  <section class="learn-grid">

    <div class="learn-card" data-module="basics">
      <div class="learn-icon">üéì</div>
      <h3>Cyber Security Basics</h3>
      <div class="module-meta">
        <span class="badge level">Beginner</span>
        <span class="badge duration">‚è± 30 mins</span>
      </div>
      <p>Understand what cyber security is, why it matters, and how digital threats impact individuals and
        organizations.</p>
      <button class="start-btn" onclick="startModule('basics')">Start Learning ‚Üí</button>
    </div>

    <div class="learn-card" data-module="attacks">
      <div class="learn-icon">‚öîÔ∏è</div>
      <h3>Cyber Attacks & Threats</h3>
      <div class="module-meta">
        <span class="badge level">Beginner - Intermediate</span>
        <span class="badge duration">‚è± 45 mins</span>
      </div>
      <p>Learn about phishing, malware, ransomware, and social engineering attacks with real-world examples.</p>
      <button class="start-btn" onclick="startModule('attacks')">Start Learning ‚Üí</button>
    </div>

    <div class="learn-card" data-module="iam">
      <div class="learn-icon">üîê</div>
      <h3>Identity & Access Management</h3>
      <div class="module-meta">
        <span class="badge level">Intermediate</span>
        <span class="badge duration">‚è± 40 mins</span>
      </div>
      <p>Explore authentication, authorization, RBAC, and the principle of least privilege.</p>
      <button class="start-btn" onclick="startModule('iam')">Start Learning ‚Üí</button>
    </div>

    <div class="learn-card" data-module="webapp">
      <div class="learn-icon">üåê</div>
      <h3>Web Application Security</h3>
      <div class="module-meta">
        <span class="badge level">Intermediate</span>
        <span class="badge duration">‚è± 50 mins</span>
      </div>
      <p>Understand SQL Injection, XSS, insecure authentication, and secure coding practices.</p>
      <button class="start-btn" onclick="startModule('webapp')">Start Learning ‚Üí</button>
    </div>

    <div class="learn-card" data-module="encryption">
      <div class="learn-icon">üîí</div>
      <h3>Data Protection & Encryption</h3>
      <div class="module-meta">
        <span class="badge level">Intermediate</span>
        <span class="badge duration">‚è± 45 mins</span>
      </div>
      <p>Learn how encryption, hashing, and secure data storage protect sensitive information.</p>
      <button class="start-btn" onclick="startModule('encryption')">Start Learning ‚Üí</button>
    </div>

    <div class="learn-card" data-module="awareness">
      <div class="learn-icon">üõ°Ô∏è</div>
      <h3>Cyber Awareness & Best Practices</h3>
      <div class="module-meta">
        <span class="badge level">All Levels</span>
        <span class="badge duration">‚è± 35 mins</span>
      </div>
      <p>Build habits that reduce cyber risk, including password hygiene and phishing detection.</p>
      <button class="start-btn" onclick="startModule('awareness')">Start Learning ‚Üí</button>
    </div>

  </section>

  <!-- MODULE MODAL -->
  <div id="moduleModal" class="module-modal">
    <div class="modal-content">
      <button class="close-modal" onclick="closeModule()">√ó</button>
      <div class="modal-header">
        <h2 id="moduleTitle">Loading...</h2>
        <p id="moduleLevel"></p>
      </div>

      <div id="moduleContent" class="loading">
        <div class="spinner"></div>
        <p>Loading module content...</p>
      </div>

      <div class="quiz-section" id="quizSection" style="display: none;">
        <h4>üìù Knowledge Check</h4>
        <p style="color: #94a3b8; margin-bottom: 20px;">Answer these questions to complete the module (70% required to
          pass)</p>
        <div id="quizQuestions"></div>
        <button class="action-btn" onclick="submitQuiz()">Submit Quiz</button>
        <button class="action-btn secondary" onclick="closeModule()">Close</button>
        <div id="quizResult" class="quiz-result"></div>
      </div>
    </div>
  </div>

  <!-- CERTIFICATE MODAL -->
  <div id="certificateModal" class="certificate-modal">
    <div class="certificate-content" id="certificateContent">
      <img
        src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 200 200'%3E%3Cdefs%3E%3ClinearGradient id='grad1' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%2322d3ee;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%233b82f6;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Ccircle cx='100' cy='100' r='95' fill='url(%23grad1)' opacity='0.1'/%3E%3Cpath d='M100 30 L130 60 L170 60 L140 90 L150 130 L100 110 L50 130 L60 90 L30 60 L70 60 Z' fill='url(%23grad1)' stroke='%2322d3ee' stroke-width='3'/%3E%3Ccircle cx='100' cy='100' r='25' fill='%23020617'/%3E%3Cpath d='M100 85 L100 95 M95 100 L105 100' stroke='%2322d3ee' stroke-width='3' stroke-linecap='round'/%3E%3Cpath d='M85 95 Q85 85 95 85 L105 85 Q115 85 115 95 L115 105 Q115 115 105 115 L95 115 Q85 115 85 105 Z' fill='none' stroke='%2322d3ee' stroke-width='2'/%3E%3C/svg%3E"
        class="cert-logo" alt="SecureSphere Logo">

      <div class="cert-header">
        <div class="cert-org-name">SecureSphere</div>
        <h2>Certificate of Completion</h2>
      </div>

      <p class="cert-text">This is to certify that</p>
      <div class="cert-name" id="certName">Student Name</div>
      <p class="cert-text">has successfully completed the cybersecurity training module</p>
      <div class="cert-module" id="certModule">Module Title</div>
      <p class="cert-text">demonstrating proficiency in the subject matter with a passing score</p>

      <div class="cert-footer">
        <div class="cert-date" id="certDate">Date: </div>
        <div class="cert-id" id="certId">Certificate ID: </div>
      </div>

      <div class="cert-seal">‚úì</div>

      <div class="cert-actions">
        <button class="action-btn" onclick="downloadCertificate()">üì• Download Certificate</button>
        <button class="action-btn" onclick="printCertificate()">üñ®Ô∏è Print Certificate</button>
        <button class="action-btn secondary" onclick="closeCertificate()">Close</button>
      </div>
    </div>
  </div>

  <!-- FOOTER -->
  <footer>
    <p>¬© 2026 SecureSphere | Educate. Defend. Secure.</p>
  </footer>

  <script>
    // User ID (simulated for local storage key)
    const userId = 'user_local';
    const STORAGE_KEY = 'secureSphere_progress';
    let currentModuleId = null;
    let currentModuleData = null;

    // Hardcoded Module Data
    const MODULES = {
      'basics': {
        title: 'Cyber Security Basics',
        level: 'Beginner',
        duration: '30 mins',
        content: [
          {
            heading: 'What is Cyber Security?',
            type: 'text',
            text: 'Cyber security is the practice of defending computers, servers, mobile devices, electronic systems, networks, and data from malicious attacks. It is also known as information technology security or electronic information security.'
          },
          {
            heading: 'Why is it Important?',
            type: 'list',
            items: [
              'Protection of sensitive data',
              'Preservation of reputation',
              'Compliance with regulations',
              'Business continuity'
            ]
          }
        ]
      },
      'attacks': {
        title: 'Cyber Attacks & Threats',
        level: 'Beginner - Intermediate',
        duration: '45 mins',
        content: [
          {
            heading: 'Common Cyber Threats',
            type: 'text',
            text: 'Cyber threats are malicious acts that seek to damage data, steal data, or disrupt digital life in general. Cyber threats include computer viruses, data breaches, and Denial of Service (DoS) attacks.'
          },
          {
            heading: 'Types of Attacks',
            type: 'list',
            items: [
              'Malware: Software designed to harm devices',
              'Phishing: Deceptive emails to steal info',
              'Ransomware: Extortion software that locks data',
              'Man-in-the-Middle: Intercepting communication'
            ]
          }
        ]
      },
      'iam': {
        title: 'Identity & Access Management',
        level: 'Intermediate',
        duration: '40 mins',
        content: [
          {
            heading: 'Understanding IAM',
            type: 'text',
            text: 'Identity and Access Management (IAM) is a framework of policies and technologies for ensuring that the proper people in an enterprise have the appropriate access to technology resources.'
          },
          {
            heading: 'Key Concepts',
            type: 'list',
            items: [
              'Authentication: Verifying who you are',
              'Authorization: Verifying what you can do',
              'Least Privilege: Giving only necessary access',
              'Role-Based Access Control (RBAC)'
            ]
          }
        ]
      },
      'webapp': {
        title: 'Web Application Security',
        level: 'Intermediate',
        duration: '50 mins',
        content: [
          {
            heading: 'Securing Web Apps',
            type: 'text',
            text: 'Web application security deals with security of websites, web applications and web services like APIs. High-level security is a requirement for all web applications.'
          },
          {
            heading: 'Common Vulnerabilities (OWASP Top 10)',
            type: 'list',
            items: [
              'Injection (SQL, NoSQL, OS)',
              'Broken Authentication',
              'Sensitive Data Exposure',
              'Cross-Site Scripting (XSS)'
            ]
          }
        ]
      },
      'encryption': {
        title: 'Data Protection & Encryption',
        level: 'Intermediate',
        duration: '45 mins',
        content: [
          {
            heading: 'The Power of Encryption',
            type: 'text',
            text: 'Encryption is the process of encoding information. This process converts the original representation of the information, known as plaintext, into an alternative form known as ciphertext.'
          },
          {
            heading: 'Types of Encryption',
            type: 'list',
            items: [
              'Symmetric Encryption: Same key for encryption/decryption',
              'Asymmetric Encryption: Public and private key pair',
              'Hashing: One-way transformation for integrity',
              'Salting: Adding random data to hashes'
            ]
          }
        ]
      },
      'awareness': {
        title: 'Cyber Awareness & Best Practices',
        level: 'All Levels',
        duration: '35 mins',
        content: [
          {
            heading: 'Stay Safe Online',
            type: 'text',
            text: 'Security awareness training is a strategy used by IT and security professionals to prevent and mitigate user risk. These programs are designed to help users and employees understand the role they play in helping to combat information security breaches.'
          },
          {
            heading: 'Best Practices',
            type: 'list',
            items: [
              'Use strong, unique passwords',
              'Enable Multi-Factor Authentication (MFA)',
              'Keep software updated',
              'Be skeptical of unexpected emails'
            ]
          }
        ]
      }
    };

    // Load progress on page load
    window.addEventListener('DOMContentLoaded', loadProgress);

    function getProgress() {
      const stored = localStorage.getItem(STORAGE_KEY);
      return stored ? JSON.parse(stored) : {};
    }

    function saveProgress(moduleId, completed) {
      const progress = getProgress();
      if (!progress[moduleId]) progress[moduleId] = {};
      progress[moduleId].completed = completed;
      localStorage.setItem(STORAGE_KEY, JSON.stringify(progress));
    }

    async function loadProgress() {
      try {
        const progress = getProgress();
        let completed = 0;
        const total = Object.keys(MODULES).length; // 6

        // Update UI based on progress
        Object.keys(progress).forEach(moduleId => {
          if (progress[moduleId].completed) {
            completed++;
            const card = document.querySelector(`[data-module="${moduleId}"]`);
            if (card) {
              const meta = card.querySelector('.module-meta');
              if (!meta.querySelector('.badge.completed')) {
                const badge = document.createElement('span');
                badge.className = 'badge completed';
                badge.textContent = '‚úì Completed';
                meta.appendChild(badge);
              }
            }
          }
        });

        document.getElementById('completedModules').textContent = completed;
        document.getElementById('totalModules').textContent = total;
        document.getElementById('progressPercent').textContent = Math.round((completed / total) * 100) + '%';
      } catch (error) {
        console.error('Error loading progress:', error);
      }
    }

    function startModule(moduleId) {
      currentModuleId = moduleId;
      const modal = document.getElementById('moduleModal');
      modal.classList.add('active');
      document.body.style.overflow = 'hidden';

      // Reset content
      document.getElementById('moduleContent').innerHTML = '<div class="loading"><div class="spinner"></div><p>Loading module content...</p></div>';
      document.getElementById('quizSection').style.display = 'none';

      // Simulate network delay
      setTimeout(() => {
        try {
          currentModuleData = MODULES[moduleId]; // Load from local data

          if (!currentModuleData) throw new Error('Module not found');

          document.getElementById('moduleTitle').textContent = currentModuleData.title;
          document.getElementById('moduleLevel').textContent = `${currentModuleData.level} ‚Ä¢ ${currentModuleData.duration}`;

          // Render content
          let contentHTML = '';
          currentModuleData.content.forEach(section => {
            contentHTML += '<div class="content-section">';
            contentHTML += `<h4>${section.heading}</h4>`;

            if (section.type === 'text') {
              contentHTML += `<p>${section.text}</p>`;
            } else if (section.type === 'list') {
              contentHTML += '<ul>';
              section.items.forEach(item => {
                contentHTML += `<li>${item}</li>`;
              });
              contentHTML += '</ul>';
            }

            contentHTML += '</div>';
          });

          contentHTML += '<button class="action-btn" onclick="showQuiz()">Take Quiz ‚Üí</button>';
          contentHTML += '<button class="action-btn secondary" onclick="closeModule()">Close</button>';

          document.getElementById('moduleContent').innerHTML = contentHTML;
        } catch (error) {
          document.getElementById('moduleContent').innerHTML = '<p style="color: #ef4444;">Error loading module content.</p>';
          console.error('Error loading module:', error);
        }
      }, 500);
    }

    function showQuiz() {
      document.getElementById('quizSection').style.display = 'block';
      document.getElementById('quizSection').scrollIntoView({ behavior: 'smooth' });

      // Generate quiz questions (simplified - 2 questions per module reference)
      const questions = [
        `What is the main focus of ${currentModuleData.title}?`,
        `Name one key concept from ${currentModuleData.title}.`
      ];

      let quizHTML = '';
      questions.forEach((q, index) => {
        quizHTML += `
      <div class="quiz-question">
        <label>${index + 1}. ${q}</label>
        <input type="text" id="answer${index}" placeholder="Your answer...">
      </div>
    `;
      });

      document.getElementById('quizQuestions').innerHTML = quizHTML;
      document.getElementById('quizResult').classList.remove('show', 'passed', 'failed');
    }

    // Quiz answer validation with keywords
    const QUIZ_ANSWERS = {
      'basics': [
        ['cyber', 'security', 'defense', 'protection', 'information'],
        ['data', 'reputation', 'compliance', 'business', 'continuity']
      ],
      'attacks': [
        ['threat', 'attack', 'malicious', 'breach', 'virus'],
        ['malware', 'phishing', 'ransomware', 'mitm', 'middle']
      ],
      'iam': [
        ['identity', 'access', 'management', 'iam', 'authentication'],
        ['authentication', 'authorization', 'privilege', 'rbac', 'role']
      ],
      'webapp': [
        ['web', 'application', 'security', 'website', 'api'],
        ['injection', 'sql', 'xss', 'authentication', 'owasp']
      ],
      'encryption': [
        ['encryption', 'encode', 'cipher', 'plaintext', 'protection'],
        ['symmetric', 'asymmetric', 'hash', 'salt', 'key']
      ],
      'awareness': [
        ['awareness', 'training', 'security', 'safe', 'risk'],
        ['password', 'mfa', 'update', 'email', 'phishing']
      ]
    };

    function submitQuiz() {
      const answers = [
        document.getElementById('answer0').value,
        document.getElementById('answer1').value
      ];

      if (answers.some(a => !a.trim())) {
        alert('Please answer all questions!');
        return;
      }

      // Validate answers against keywords
      const correctAnswers = QUIZ_ANSWERS[currentModuleId];
      let score = 0;
      const feedback = [];

      answers.forEach((answer, index) => {
        const answerLower = answer.toLowerCase();
        const keywords = correctAnswers[index];
        const isCorrect = keywords.some(keyword => answerLower.includes(keyword));

        if (isCorrect) {
          score++;
          feedback.push(`‚úÖ Question ${index + 1}: Correct`);
        } else {
          feedback.push(`‚ùå Question ${index + 1}: Incorrect - Expected keywords: ${keywords.slice(0, 3).join(', ')}`);
        }
      });

      const percentage = (score / answers.length) * 100;
      const passed = percentage >= 70; // 70% required to pass

      const resultDiv = document.getElementById('quizResult');

      if (passed) {
        resultDiv.innerHTML = `
          <h4>Module Completed! üéâ</h4>
          <p>You scored ${percentage.toFixed(0)}% (${score}/${answers.length} correct)</p>
          <div style="margin-top: 15px; text-align: left;">
            ${feedback.map(f => `<p style="margin: 5px 0;">${f}</p>`).join('')}
          </div>
        `;
        resultDiv.classList.add('show', 'passed');

        // Save progress locally
        saveProgress(currentModuleId, true);

        // Show certificate option
        setTimeout(() => {
          if (confirm('Congratulations! Would you like to generate a certificate?')) {
            generateCertificate();
          } else {
            loadProgress();
            closeModule();
          }
        }, 1000);

      } else {
        resultDiv.innerHTML = `
          <h4>Quiz Failed ‚ùå</h4>
          <p>You scored ${percentage.toFixed(0)}% (${score}/${answers.length} correct)</p>
          <p>You need at least 70% to pass. Please review the material and try again.</p>
          <div style="margin-top: 15px; text-align: left;">
            ${feedback.map(f => `<p style="margin: 5px 0;">${f}</p>`).join('')}
          </div>
          <button class="action-btn" onclick="retryQuiz()" style="margin-top: 15px;">üîÑ Retry Quiz</button>
        `;
        resultDiv.classList.add('show', 'failed');
      }
    }

    function retryQuiz() {
      // Clear previous answers
      document.getElementById('answer0').value = '';
      document.getElementById('answer1').value = '';
      document.getElementById('quizResult').classList.remove('show', 'passed', 'failed');
      document.getElementById('answer0').focus();
    }

    function generateCertificate() {
      const name = prompt('Enter your name for the certificate:') || 'Student';
      const date = new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
      const certificateId = 'SS-' + Date.now().toString(36).toUpperCase() + '-' + Math.random().toString(36).substr(2, 4).toUpperCase();

      document.getElementById('certName').textContent = name;
      document.getElementById('certModule').textContent = currentModuleData.title;
      document.getElementById('certDate').textContent = 'Issued: ' + date;
      document.getElementById('certId').textContent = certificateId;

      document.getElementById('certificateModal').classList.add('active');
      closeModule();
      loadProgress();
    }

    function downloadCertificate() {
      // Create a temporary link to download the certificate as HTML
      const certificateContent = document.getElementById('certificateContent').cloneNode(true);

      // Remove action buttons from the clone
      const actions = certificateContent.querySelector('.cert-actions');
      if (actions) actions.remove();

      const htmlContent = `
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SecureSphere Certificate</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { 
      font-family: 'Inter', sans-serif; 
      display: flex; 
      justify-content: center; 
      align-items: center; 
      min-height: 100vh; 
      background: #f1f5f9;
      padding: 20px;
    }
    ${document.querySelector('style').textContent}
    .certificate-content { 
      position: relative; 
      margin: 0;
    }
    @media print {
      body { background: white; }
      .certificate-content { box-shadow: none; }
    }
  </style>
</head>
<body>
  ${certificateContent.outerHTML}
</body>
</html>
      `;

      const blob = new Blob([htmlContent], { type: 'text/html' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `SecureSphere_Certificate_${document.getElementById('certId').textContent}.html`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    }

    function printCertificate() {
      const printWindow = window.open('', '_blank');
      const certificateContent = document.getElementById('certificateContent').cloneNode(true);

      // Remove action buttons from the clone
      const actions = certificateContent.querySelector('.cert-actions');
      if (actions) actions.remove();

      printWindow.document.write(`
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SecureSphere Certificate</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { 
      font-family: 'Inter', sans-serif; 
      display: flex; 
      justify-content: center; 
      align-items: center; 
      min-height: 100vh; 
      padding: 20px;
    }
    ${document.querySelector('style').textContent}
    .certificate-content { margin: 0; }
    @media print {
      body { padding: 0; }
      .certificate-content { box-shadow: none; page-break-inside: avoid; }
    }
  </style>
</head>
<body>
  ${certificateContent.outerHTML}
</body>
</html>
      `);
      printWindow.document.close();

      // Wait for content to load before printing
      setTimeout(() => {
        printWindow.print();
      }, 250);
    }

    function closeModule() {
      document.getElementById('moduleModal').classList.remove('active');
      document.body.style.overflow = 'auto';
      currentModuleId = null;
      currentModuleData = null;
    }

    function closeCertificate() {
      document.getElementById('certificateModal').classList.remove('active');
    }

    // Close modals on Escape key
    document.addEventListener('keydown', function (e) {
      if (e.key === 'Escape') {
        closeModule();
        closeCertificate();
      }
    });
  </script>

</body>

</html>